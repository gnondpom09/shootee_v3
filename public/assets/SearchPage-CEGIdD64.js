import{d as k,r as E,y as T,M as F,A as O,o as w,h as P,B as z,c as N,w as m,b as v,e as f,f as D}from"./index-DSsP63NG.js";import{u as V}from"./useMarkers-BbgJEJqX.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./marker.service-Br9x_Gl4.js";const $={id:"app"},q=z('<div id="autocomplete-container" data-v-30dfd48c><svg class="search-icon" viewBox="0 0 16 16" data-v-30dfd48c><path d="M3.617 7.083a4.338 4.338 0 1 1 8.676 0 4.338 4.338 0 0 1-8.676 0m4.338-5.838a5.838 5.838 0 1 0 2.162 11.262l2.278 2.279a1 1 0 0 0 1.415-1.414l-1.95-1.95A5.838 5.838 0 0 0 7.955 1.245" fill-rule="evenodd" clip-rule="evenodd" data-v-30dfd48c></path></svg><input type="text" id="autocomplete-input" placeholder="Search Localities..." autocomplete="off" data-v-30dfd48c><button aria-label="Clear" class="clear-searchButton" type="button" data-v-30dfd48c><svg class="clear-icon" viewBox="0 0 24 24" data-v-30dfd48c><path d="M7.074 5.754a.933.933 0 1 0-1.32 1.317L10.693 12l-4.937 4.929a.931.931 0 1 0 1.319 1.317l4.938-4.93 4.937 4.93a.933.933 0 0 0 1.581-.662.93.93 0 0 0-.262-.655L13.331 12l4.937-4.929a.93.93 0 0 0-.663-1.578.93.93 0 0 0-.656.261l-4.938 4.93z" data-v-30dfd48c></path></svg></button><ul id="suggestions-list" data-v-30dfd48c></ul></div><div id="map" data-v-30dfd48c></div>',2),H=[q],R=k({__name:"ExploreContainer",setup(b){let u,s,i,p,c,_;const o=E(null),a=E(null),l=E(null),{setMarkersOnMap:L}=V();T(()=>{o.value=document.getElementById("autocomplete-input"),a.value=document.getElementById("suggestions-list"),l.value=document.getElementsByClassName("clear-searchButton")[0],M(),o.value&&a.value&&(o.value.addEventListener("input",B),o.value.addEventListener("keydown",e=>{if(e.key==="Enter"&&a.value){const t=a.value.querySelector("li");t&&t.click()}}),l.value&&o.value&&a.value&&l.value.addEventListener("click",()=>{o.value&&a.value&&l.value&&(o.value.value="",a.value.style.display="none",l.value.style.display="none",s&&(s.setMap(null),i.close()),o.value.focus())}))});function M(){u=new woosmap.map.Map(document.getElementById("map"),{zoom:5,disableDefaultUI:!1,styles:F}),L(u),i=new woosmap.map.InfoWindow({}),p=new window.woosmap.map.LocalitiesService,c={input:"",types:["locality","address","postal_code"]},_=I(p.autocomplete,0)}function B(){if(o.value&&a.value&&o.value){c.input=o.value.value;const e={key:O,input:c.input,types:"locality|postal_code|address",components:"country:fr|country:es"};c.input?_(e).then(t=>S(t)).catch(t=>console.error("Error autocomplete localities:",t)):a.value&&l.value&&(a.value.style.display="none",l.value.style.display="none")}}function C(e){p.getDetails({publicId:e}).then(t=>x(t.result)).catch(t=>console.error("Error getting locality details:",t))}function x(e){if(s&&(s.setMap(null),i.close()),e!=null&&e.geometry){s=new woosmap.map.Marker({position:e.geometry.location,icon:{url:"https://images.woosmap.com/marker.png",scaledSize:{height:50,width:32}}}),s.setMap(u),i.setContent('<span id="'.concat(e.public_id,'">').concat(e.formatted_address,"</span>")),i.open(u,s),u.flyTo({center:e.geometry.location,zoom:14});const t=document.getElementById(e.public_id);t&&(t.style.color="blue")}}function S(e){o.value&&a.value&&l.value&&(a.value.innerHTML="",e.localities.length>0&&c.input?(e.localities.forEach(t=>{var d;const n=document.createElement("li");n.onmouseover=()=>{n.style.backgroundColor="#f2f2f2"},n.onmouseout=()=>{n.style.backgroundColor="#FFFFFF"},n.style.padding="12px",n.style.transition="background-color 0.3s ease",n.style.cursor="pointer",n.textContent=(d=t.description)!=null?d:"",n.addEventListener("click",()=>{var r;o.value&&a.value&&(o.value.value=(r=t.description)!=null?r:"",a.value.style.display="none",C(t.public_id))}),a.value&&a.value.appendChild(n)}),a.value.style.display="block",l.value.style.display="block"):a.value.style.display="none")}document.addEventListener("click",e=>{!e.target.closest("#autocomplete-container")&&a.value&&(a.value.style.display="none")});function I(e,t){let n=null,d=null,r=null;return function(...A){return new Promise((y,g)=>{n!==null&&clearTimeout(n),d=y,r=g,n=setTimeout(()=>{e(...A).then(h=>{d===y&&r===g&&y(h)}).catch(h=>{d===y&&r===g&&g(h)})},t)})}}return(e,t)=>(w(),P("div",$,H))}}),Y=W(R,[["__scopeId","data-v-30dfd48c"]]),Q=k({__name:"SearchPage",setup(b){return(u,s)=>{const i=v("ion-title"),p=v("ion-toolbar"),c=v("ion-header"),_=v("ion-content"),o=v("ion-page");return w(),N(o,null,{default:m(()=>[f(c,null,{default:m(()=>[f(p,null,{default:m(()=>[f(i,{class:"oswald-title"},{default:m(()=>[D("SHOOTEE")]),_:1})]),_:1})]),_:1}),f(_,null,{default:m(()=>[f(Y)]),_:1})]),_:1})}}});export{Q as default};
