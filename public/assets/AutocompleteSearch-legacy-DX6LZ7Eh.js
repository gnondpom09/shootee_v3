System.register(["./index-legacy-BhxHhYY0.js","./marker.service-legacy-BDZ52duD.js","./_plugin-vue_export-helper-legacy-DgAO6S8O.js"],(function(e,t){"use strict";var o,l,a,n,i,s,r,c,u,d,p,v,m;return{setters:[e=>{o=e.r,l=e.Q,a=e.y,n=e.R,i=e.d,s=e.o,r=e.h,c=e.g,u=e.l,d=e.A,p=e.B},e=>{v=e.a},e=>{m=e._}],execute:function(){var t=document.createElement("style");t.textContent=".autocomplete-container[data-v-b595dffc]{display:flex;z-index:1;box-shadow:0 2px 4px rgba(0,0,0,.2),0 -1px rgba(0,0,0,.02);background:#fff;border-radius:12px;padding:0 12px;max-width:320px;width:100%;height:42px;border:none;box-sizing:border-box;align-items:center;cursor:text;font-size:15px}.autocomplete-container .search-icon[data-v-b595dffc],.autocomplete-container .clear-icon[data-v-b595dffc]{color:#000;flex-shrink:0;height:16px;width:16px}.autocomplete-container .clear-icon[data-v-b595dffc]{transform:scale(1.3)}.autocomplete-input[data-v-b595dffc]{box-sizing:border-box;padding:0;height:40px;line-height:24px;vertical-align:top;transition-property:color;transition-duration:.3s;width:100%;text-overflow:ellipsis;background:transparent;border-radius:0;border:0;margin:0 8px;outline:0;overflow:visible;-webkit-appearance:textfield;appearance:textfield;font-size:100%;color:#000}.clear-searchButton[data-v-b595dffc]{display:none;height:18px;width:22px;background:none;border:none;vertical-align:middle;pointer-events:all;cursor:pointer}.suggestions-list[data-v-b595dffc]{border-radius:12px;box-shadow:0 2px 4px rgba(0,0,0,.2),0 -1px rgba(0,0,0,.02);box-sizing:border-box;position:absolute;max-width:320px;width:100%;top:100%;left:0;z-index:1;list-style:none;max-height:80vh;margin:5px 0 0;padding:0;display:none;overflow-y:auto;background-color:#fff;color:#000}.suggestions-list.visible[data-v-b595dffc]{display:block}.suggestions-list li[data-v-b595dffc]:hover{background-color:#f2f2f2}\n",document.head.appendChild(t),e({a:function(){function e(e,t){return fetch(`https://api.woosmap.com/localities/geocode/?${function(e){const t=[];for(let o in e)if(e.hasOwnProperty(o)){let l=e[o];t.push(`${encodeURIComponent(o)}=${encodeURIComponent(l)}`)}return t.join("&")}({key:t,latlng:e})}`).then((e=>e.json()))}return{spotName:f,address:g,latitude:h,longitude:y,setCoordonates:function(e,t){h.value=e,y.value=t},resetCoordonates:function(){h.value=null,y.value=null,g.value="",f.value=""},reverseGeocodeMarker:function(t,o){e(t+","+o,l).then((e=>{let t=e.results[0];g.value=t.formatted_address,null!=e.results&&e.results.length}))}}},u:function(e){let t;function o(){t=new woosmap.map.Map(document.getElementById(e),{zoom:4,disableDefaultUI:!0,styles:n})}return a((()=>{o()})),{initMap:o,resetMap:function(){t={}},setMarker:function(e,o){const l=new woosmap.map.Marker({position:{lat:e,lng:o},icon:{url:"https://images.woosmap.com/marker.png",scaledSize:{height:50,width:32}}});l.setMap(t),t.flyTo({center:{lat:e,lng:o},zoom:14})},setMarkersOnMap:function(){const e=v();e.value&&e.value.forEach(((e,o)=>{const l={lat:e.location.latitude,lng:e.location.longitude},a=new woosmap.map.Marker({position:l,icon:{url:"https://images.woosmap.com/marker.png",scaledSize:{height:50,width:32}}}),n=new woosmap.map.InfoWindow({}),i=`${o}-${e.createdAt}`,s=e.photos?e.photos.length:0,r=`<div id="${i}" class="info-content"><ion-thumbnail slot="start"><img src="${e.thumbnail}" /></ion-thumbnail><ion-label><h4>${e.address}</h4><p>${s} photos. <a href='/spot-detail/${e.id}'>Voir les d√©tails</a></ion-label></div>`;n.setOffset(new woosmap.map.Point(50,-500)),n.setContent(r),a.addListener("click",(function(){n.open(t,a),t.flyTo({center:a.getPosition(),zoom:14});const e=document.getElementById(i);e&&(e.style.color="blue",e.style.background="white",e.style.display="flex",e.style.gap="8px")})),a.setMap(t)}))},removeMarker:function(e,t){const o=new woosmap.map.Marker({position:{lat:e,lng:t}});o.setMap(null)}}}});const f=o(""),g=o(""),h=o(null),y=o(null),b=e=>(d("data-v-b595dffc"),e=e(),p(),e),x=["id"],w=b((()=>c("svg",{class:"search-icon",viewBox:"0 0 16 16"},[c("path",{d:"M3.617 7.083a4.338 4.338 0 1 1 8.676 0 4.338 4.338 0 0 1-8.676 0m4.338-5.838a5.838 5.838 0 1 0 2.162 11.262l2.278 2.279a1 1 0 0 0 1.415-1.414l-1.95-1.95A5.838 5.838 0 0 0 7.955 1.245","fill-rule":"evenodd","clip-rule":"evenodd"})],-1))),k=["id"],M=["id"],$=[b((()=>c("svg",{class:"clear-icon",viewBox:"0 0 24 24"},[c("path",{d:"M7.074 5.754a.933.933 0 1 0-1.32 1.317L10.693 12l-4.937 4.929a.931.931 0 1 0 1.319 1.317l4.938-4.93 4.937 4.93a.933.933 0 0 0 1.581-.662.93.93 0 0 0-.262-.655L13.331 12l4.937-4.929a.93.93 0 0 0-.663-1.578.93.93 0 0 0-.656.261l-4.938 4.93z"})],-1)))],E=["id"];e("A",m(i({__name:"AutocompleteSearch",emits:["select-city"],setup(e,{emit:t}){const n=function(e=4){const t=crypto.getRandomValues(new Uint8Array(e));return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}(),i=t;let d,p,v,m,f;const g=o(null),h=o(null),y=o(null);function b(){if(g.value&&h.value&&g.value){d.input=g.value.value;const e={key:l,input:d.input,types:"locality|postal_code|address",components:"country:fr|country:es"};d.input?p(e).then((e=>{return t=e,void(g.value&&h.value&&y.value&&(h.value.innerHTML="",t.localities.length>0&&d.input?(t.localities.forEach((e=>{var t;const o=document.createElement("li");o.onmouseover=()=>{o.style.backgroundColor="#f2f2f2"},o.onmouseout=()=>{o.style.backgroundColor="#FFFFFF"},o.style.padding="12px",o.style.transition="background-color 0.3s ease",o.style.cursor="pointer",o.style.textAlign="left",o.textContent=null!==(t=e.description)&&void 0!==t?t:"",o.addEventListener("click",(()=>{var t,o;g.value&&h.value&&(g.value.value=null!==(t=e.description)&&void 0!==t?t:"",h.value.style.display="none",o=e.public_id,f.getDetails({publicId:o}).then((e=>function(e){v&&(v.setMap(null),m.close()),null!=e&&e.geometry&&(v=new woosmap.map.Marker({position:e.geometry.location,icon:{url:"https://images.woosmap.com/marker.png",scaledSize:{height:50,width:32}}}),i("select-city",e))}(e.result))).catch((e=>console.error("Error getting locality details:",e))))})),h.value&&h.value.appendChild(o)})),h.value.style.display="block",y.value.style.display="block"):h.value.style.display="none"));var t})).catch((e=>console.error("Error autocomplete localities:",e))):h.value&&y.value&&(h.value.style.display="none",y.value.style.display="none")}}return document.addEventListener("click",(e=>{!e.target.closest(`#autocomplete-container-${n}`)&&h.value&&(h.value.style.display="none")})),a((()=>{g.value=document.getElementById(`autocomplete-input-${n}`),h.value=document.getElementById(`suggestions-list-${n}`),y.value=document.getElementById(`clear-searchButton-${n}`),m=new woosmap.map.InfoWindow({}),f=new window.woosmap.map.LocalitiesService,d={input:"",types:["locality","address","postal_code"]},p=function(e,t){let o=null,l=null,a=null;return function(...n){return new Promise(((i,s)=>{null!==o&&clearTimeout(o),l=i,a=s,o=setTimeout((()=>{e(...n).then((e=>{l===i&&a===s&&i(e)})).catch((e=>{l===i&&a===s&&s(e)}))}),t)}))}}(f.autocomplete,0),g.value&&h.value&&(g.value.addEventListener("input",b),g.value.addEventListener("keydown",(e=>{if("Enter"===e.key&&h.value){const e=h.value.querySelector("li");e&&e.click()}})),y.value&&g.value&&h.value&&y.value.addEventListener("click",(()=>{g.value&&h.value&&y.value&&(g.value.value="",h.value.style.display="none",y.value.style.display="none",v&&(v.setMap(null),m.close()),g.value.focus())})))})),(e,t)=>(s(),r("div",{id:`#autocomplete-container-${u(n)}`,class:"autocomplete-container"},[w,c("input",{type:"text",id:`autocomplete-input-${u(n)}`,class:"autocomplete-input",placeholder:"Search Localities...",autocomplete:"off"},null,8,k),c("button",{"aria-label":"Clear",id:`clear-searchButton-${u(n)}`,class:"clear-searchButton",type:"button"},$,8,M),c("ul",{id:`suggestions-list-${u(n)}`,class:"suggestions-list"},null,8,E)],8,x))}}),[["__scopeId","data-v-b595dffc"]]))}}}));
