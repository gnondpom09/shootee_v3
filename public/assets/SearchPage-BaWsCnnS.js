import{d as k,r as b,v as A,o as E,h as F,E as z,c as N,w as m,b as v,e as f,f as O}from"./index-yxnoeXk1.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";const w="woos-fc8fe374-edf7-3d11-86b2-7e787c73d350",$={id:"app"},D=z('<div id="autocomplete-container" data-v-acb92754><svg class="search-icon" viewBox="0 0 16 16" data-v-acb92754><path d="M3.617 7.083a4.338 4.338 0 1 1 8.676 0 4.338 4.338 0 0 1-8.676 0m4.338-5.838a5.838 5.838 0 1 0 2.162 11.262l2.278 2.279a1 1 0 0 0 1.415-1.414l-1.95-1.95A5.838 5.838 0 0 0 7.955 1.245" fill-rule="evenodd" clip-rule="evenodd" data-v-acb92754></path></svg><input type="text" id="autocomplete-input" placeholder="Search Localities..." autocomplete="off" data-v-acb92754><button aria-label="Clear" class="clear-searchButton" type="button" data-v-acb92754><svg class="clear-icon" viewBox="0 0 24 24" data-v-acb92754><path d="M7.074 5.754a.933.933 0 1 0-1.32 1.317L10.693 12l-4.937 4.929a.931.931 0 1 0 1.319 1.317l4.938-4.93 4.937 4.93a.933.933 0 0 0 1.581-.662.93.93 0 0 0-.262-.655L13.331 12l4.937-4.929a.93.93 0 0 0-.663-1.578.93.93 0 0 0-.656.261l-4.938 4.93z" data-v-acb92754></path></svg></button><ul id="suggestions-list" data-v-acb92754></ul></div><div id="map" data-v-acb92754></div>',2),V=[D],W=k({__name:"ExploreContainer",setup(C){let i,s,c,p,u,_;const n=b(null),t=b(null),l=b(null);A(()=>{const e=document.createElement("script");e.src="https://sdk.woosmap.com/map/map.js?key=".concat(w,"&callback=initMap"),e.async=!0,document.body.appendChild(e),n.value=document.getElementById("autocomplete-input"),t.value=document.getElementById("suggestions-list"),l.value=document.getElementsByClassName("clear-searchButton")[0],e.addEventListener("load",()=>{L()}),n.value&&t.value&&(n.value.addEventListener("input",M),n.value.addEventListener("keydown",a=>{if(a.key==="Enter"&&t.value){const o=t.value.querySelector("li");o&&o.click()}}),l.value&&n.value&&t.value&&l.value.addEventListener("click",()=>{n.value&&t.value&&l.value&&(n.value.value="",t.value.style.display="none",l.value.style.display="none",s&&(s.setMap(null),c.close()),n.value.focus())}))});function L(){i=new woosmap.map.Map(document.getElementById("map"),{center:{lat:42.895328519999985,lng:1.7943832799999995},zoom:10,disableDefaultUI:!1,styles:[{featureType:"point_of_interest",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"point_of_interest.business.shop",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{lightness:-15}]}]}),new woosmap.map.Marker({position:i.getCenter(),icon:{url:"https://images.woosmap.com/marker.png",scaledSize:{height:50,width:32}}}).setMap(i),c=new woosmap.map.InfoWindow({}),p=new window.woosmap.map.LocalitiesService,u={input:"",types:["locality","address","postal_code"]},_=I(p.autocomplete,0)}function M(){if(n.value&&t.value&&n.value){u.input=n.value.value;const e={key:w,input:u.input,types:"locality|postal_code|address",components:"country:fr|country:es"};u.input?_(e).then(a=>S(a)).catch(a=>console.error("Error autocomplete localities:",a)):t.value&&l.value&&(t.value.style.display="none",l.value.style.display="none")}}function x(e){p.getDetails({publicId:e}).then(a=>B(a.result)).catch(a=>console.error("Error getting locality details:",a))}function B(e){if(s&&(s.setMap(null),c.close()),e!=null&&e.geometry){s=new woosmap.map.Marker({position:e.geometry.location,icon:{url:"https://images.woosmap.com/marker.png",scaledSize:{height:50,width:32}}}),s.setMap(i),c.setContent('<span id="'.concat(e.public_id,'">').concat(e.formatted_address,"</span>")),c.open(i,s),console.log(e.geometry.location),i.flyTo({center:e.geometry.location,zoom:14});const a=document.getElementById(e.public_id);a&&(a.style.color="blue")}}function S(e){n.value&&t.value&&l.value&&(t.value.innerHTML="",e.localities.length>0&&u.input?(e.localities.forEach(a=>{var r;const o=document.createElement("li");o.onmouseover=()=>{o.style.backgroundColor="#f2f2f2"},o.onmouseout=()=>{o.style.backgroundColor="#FFFFFF"},o.style.padding="12px",o.style.transition="background-color 0.3s ease",o.style.cursor="pointer",o.textContent=(r=a.description)!=null?r:"",o.addEventListener("click",()=>{var d;n.value&&t.value&&(n.value.value=(d=a.description)!=null?d:"",t.value.style.display="none",x(a.public_id))}),t.value&&t.value.appendChild(o)}),t.value.style.display="block",l.value.style.display="block"):t.value.style.display="none")}document.addEventListener("click",e=>{!e.target.closest("#autocomplete-container")&&t.value&&(t.value.style.display="none")});function I(e,a){let o=null,r=null,d=null;return function(...T){return new Promise((y,g)=>{o!==null&&clearTimeout(o),r=y,d=g,o=setTimeout(()=>{e(...T).then(h=>{r===y&&d===g&&y(h)}).catch(h=>{r===y&&d===g&&g(h)})},a)})}}return(e,a)=>(E(),F("div",$,V))}}),q=P(W,[["__scopeId","data-v-acb92754"]]),K=k({__name:"SearchPage",setup(C){return(i,s)=>{const c=v("ion-title"),p=v("ion-toolbar"),u=v("ion-header"),_=v("ion-content"),n=v("ion-page");return E(),N(n,null,{default:m(()=>[f(u,null,{default:m(()=>[f(p,null,{default:m(()=>[f(c,{class:"oswald-title"},{default:m(()=>[O("SHOOTEE")]),_:1})]),_:1})]),_:1}),f(_,null,{default:m(()=>[f(q)]),_:1})]),_:1})}}});export{K as default};
